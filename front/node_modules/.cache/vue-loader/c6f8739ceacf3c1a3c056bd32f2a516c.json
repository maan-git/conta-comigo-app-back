{"remainingRequest":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manoel/Documents/conta-comigo-app-front/src/components/CropDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/manoel/Documents/conta-comigo-app-front/src/components/CropDialog.vue","mtime":1587691736768},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBDcm9wcGVyIGZyb20gJ2Nyb3BwZXJqcyc7CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiBtYXBTdGF0ZShbJ3JlZ2lzdGVyJ10pLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBjcm9wcGVyOiBudWxsLAogICAgICBvYmplY3RVcmw6IG51bGwsCiAgICAgIHByZXZpZXdDcm9wcGVkOiBudWxsLAogICAgICBzZWxlY3RlZEZpbGU6IG51bGwsCiAgICAgIGRlYm91bmNlZFVwZGF0ZVByZXZpZXc6IGRlYm91bmNlKHRoaXMudXBkYXRlUHJldmlldywgMjU3KSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXR1cENyb3BwZXIoc2VsZWN0ZWRGaWxlKSB7CiAgICAgIGlmICh0aGlzLmNyb3BwZXIpIHsKICAgICAgICB0aGlzLmNyb3BwZXIuZGVzdHJveSgpOwogICAgICB9CgogICAgICBpZiAodGhpcy5vYmplY3RVcmwpIHsKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh0aGlzLm9iamVjdFVybCk7CiAgICAgIH0KCiAgICAgIGlmICghc2VsZWN0ZWRGaWxlKSB7CiAgICAgICAgdGhpcy5jcm9wcGVyID0gbnVsbDsKICAgICAgICB0aGlzLm9iamVjdFVybCA9IG51bGw7CiAgICAgICAgdGhpcy5wcmV2aWV3Q3JvcHBlZCA9IG51bGw7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLm9iamVjdFVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHNlbGVjdGVkRmlsZSk7CiAgICAgIHRoaXMuJG5leHRUaWNrKHRoaXMuc2V0dXBDcm9wcGVySW5zdGFuY2UpOwogICAgfSwKICAgIHNldHVwQ3JvcHBlckluc3RhbmNlKCkgewogICAgICB0aGlzLmNyb3BwZXIgPSBuZXcgQ3JvcHBlcih0aGlzLiRyZWZzLnNvdXJjZSwgewogICAgICAgIGFzcGVjdFJhdGlvOiAxLAogICAgICAgIGNyb3A6IHRoaXMuZGVib3VuY2VkVXBkYXRlUHJldmlldywKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlUHJldmlldygpIHsKICAgICAgY29uc3QgY2FudmFzID0gdGhpcy5jcm9wcGVyLmdldENyb3BwZWRDYW52YXMoKTsKICAgICAgdGhpcy5wcmV2aWV3Q3JvcHBlZCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwogICAgfSwKICAgIHJlc2V0Q3JvcHBlcigpIHsKICAgICAgdGhpcy5jcm9wcGVyLnJlc2V0KCk7CiAgICB9LAogICAgcm90YXRlTGVmdCgpIHsKICAgICAgdGhpcy5jcm9wcGVyLnJvdGF0ZSgtOTApOwogICAgfSwKICAgIHJvdGF0ZVJpZ2h0KCkgewogICAgICB0aGlzLmNyb3BwZXIucm90YXRlKDkwKTsKICAgIH0sCiAgICBzYXZlQ3JvcCgpIHsKICAgICAgdGhpcy4kZW1pdCgnYXZhdGFyJywgdGhpcy5wcmV2aWV3Q3JvcHBlZCk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdyZWdpc3Rlci9zZXRBdmF0YXInLCB0aGlzLnByZXZpZXdDcm9wcGVkKTsKICAgICAgdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgIH0sCiAgICBvcGVuKCkgewogICAgICB0aGlzLmRpYWxvZyA9IHRydWU7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["CropDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CropDialog.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-dialog v-model=\"dialog\" max-width=\"520\">\n      <v-card max-width=\"520\" raised>\n        <v-card-title class=\"headline primary--text\">\n          <span>Adicione uma foto para o seu perfil</span>\n          <v-spacer></v-spacer>\n          <v-btn\n            icon\n            @click=\"dialog=false\"\n          ><v-icon>mdi-close</v-icon></v-btn>\n        </v-card-title>\n        <v-card-text>\n          <v-file-input\n            :prepend-icon=\"null\"\n            v-model=\"selectedFile\"\n            accept=\"image/png, image/jpeg\"\n            label=\"Foto\"\n            placeholder=\"Selecione a imagem\"\n            outlined\n            :show-size=\"1024\"\n            class=\"my-4\"\n            @change=\"setupCropper\"\n          ></v-file-input>\n          <v-row v-if=\"objectUrl\">\n            <v-col cols=\"12\" sm=\"6\" class=\"text-center\">\n              <div class=\"overline\">Original</div>\n              <div class=\"image-container elevation-4\">\n                <img class=\"image-preview\" ref=\"source\" :src=\"objectUrl\">\n              </div>\n              <div class=\"d-flex justify-center\">\n                <v-btn icon small @click=\"resetCropper\">\n                  <v-icon small>mdi-aspect-ratio</v-icon>\n                </v-btn>\n                <div class=\"mx-2\">\n                  <v-btn icon small @click=\"rotateLeft\">\n                    <v-icon small>mdi-rotate-left</v-icon>\n                  </v-btn>\n                  <v-btn icon small @click=\"rotateRight\">\n                    <v-icon small>mdi-rotate-right</v-icon>\n                  </v-btn>\n                </div>\n              </div>\n            </v-col>\n            <v-col cols=\"12\" sm=\"6\" class=\"text-center\">\n              <div class=\"overline\">Preview</div>\n              <div class=\"image-container elevation-4\">\n                <img class=\"image-preview\" :src=\"previewCropped\">\n              </div>\n            </v-col>\n          </v-row>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            rounded\n            large\n            color=\"primary\"\n            :disabled=\"!objectUrl\"\n            @click=\"saveCrop\"\n          >\n            <span>Salvar</span>\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n<script>\nimport Cropper from 'cropperjs';\nimport debounce from 'lodash/debounce';\nimport { mapState } from 'vuex';\n\nexport default {\n  computed: mapState(['register']),\n  data() {\n    return {\n      dialog: false,\n      cropper: null,\n      objectUrl: null,\n      previewCropped: null,\n      selectedFile: null,\n      debouncedUpdatePreview: debounce(this.updatePreview, 257),\n    };\n  },\n  methods: {\n    setupCropper(selectedFile) {\n      if (this.cropper) {\n        this.cropper.destroy();\n      }\n\n      if (this.objectUrl) {\n        window.URL.revokeObjectURL(this.objectUrl);\n      }\n\n      if (!selectedFile) {\n        this.cropper = null;\n        this.objectUrl = null;\n        this.previewCropped = null;\n        return;\n      }\n\n      this.objectUrl = window.URL.createObjectURL(selectedFile);\n      this.$nextTick(this.setupCropperInstance);\n    },\n    setupCropperInstance() {\n      this.cropper = new Cropper(this.$refs.source, {\n        aspectRatio: 1,\n        crop: this.debouncedUpdatePreview,\n      });\n    },\n    updatePreview() {\n      const canvas = this.cropper.getCroppedCanvas();\n      this.previewCropped = canvas.toDataURL('image/png');\n    },\n    resetCropper() {\n      this.cropper.reset();\n    },\n    rotateLeft() {\n      this.cropper.rotate(-90);\n    },\n    rotateRight() {\n      this.cropper.rotate(90);\n    },\n    saveCrop() {\n      this.$emit('avatar', this.previewCropped);\n      this.$store.dispatch('register/setAvatar', this.previewCropped);\n      this.dialog = false;\n    },\n    open() {\n      this.dialog = true;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.image-container {\n  display: inline-block;\n}\n\n.image-preview {\n  display: block;\n  max-height: 229px;\n  max-width: 100%;\n}\n</style>\n<style lang=\"scss\">\n  @import './../../node_modules/cropperjs/dist/cropper.css';\n</style>\n"]}]}