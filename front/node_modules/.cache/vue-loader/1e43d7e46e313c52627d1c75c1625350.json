{"remainingRequest":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manoel/Documents/conta-comigo-app-front/src/components/HelpRequests.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/manoel/Documents/conta-comigo-app-front/src/components/HelpRequests.vue","mtime":1588712449318},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCBIZWxwQ2FyZCBmcm9tICdAL2NvbXBvbmVudHMvSGVscENhcmQudnVlJzsKaW1wb3J0IENhcmRDb250YWluZXIgZnJvbSAnQC9jb21wb25lbnRzL0NhcmRDb250YWluZXIudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IENhcmRDb250YWluZXIsIEhlbHBDYXJkIH0sCiAgY29tcHV0ZWQ6IG1hcFN0YXRlKFsnaGVscCcsICd1c2VyJ10pLAogIHByb3BzOiB7CiAgICBuZTogeyB0eXBlOiBCb29sZWFuIH0sCiAgICBidG5EaXNhYmxlOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGlkZGVuOiBmYWxzZSwKICAgICAgZGF0YUxpc3RIZWxwOiBudWxsLAogICAgICBkYXRhTGlzdEFwcHJvdmVkOiBudWxsLAogICAgICB0aXRsZTogJ1BlZGlkb3MnLAogICAgICBidG5MYWJlbDogbnVsbCwKICAgICAgcGFnZTogMSwKICAgICAgb2Zmc2V0OiAwLAogICAgICBsaW1pdDogNiwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzbVNpemUoKSB7CiAgICAgIHJldHVybiAodGhpcy5oZWxwLmhlbHBMaXN0ICYmIHRoaXMuaGVscC5oZWxwTGlzdC5sZW5ndGggPiAyKSA/IDYgOiAxMjsKICAgIH0sCiAgICBwYWdlc0xlbmd0aCgpIHsKICAgICAgY29uc3QgcGx1cyA9ICh0aGlzLmhlbHAuaGVscExpc3RDb3VudCAvIHRoaXMubGltaXQpICUgMiA9PT0gMCA/IDAgOiAxOwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmFkaXgKICAgICAgY29uc3QgcmV0ID0gcGFyc2VJbnQoKHRoaXMuaGVscC5oZWxwTGlzdENvdW50IC8gdGhpcy5saW1pdCkgKyBwbHVzKTsKICAgICAgcmV0dXJuIHJldDsKICAgIH0sCiAgICBsaXN0SGVscCgpIHsKICAgICAgaWYgKHRoaXMuaGlkZGVuKSByZXR1cm47CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdoZWxwL2NsZWFySGVscFN0YXRlJyk7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMub2Zmc2V0ID0gMDsKICAgICAgdGhpcy5nZXRMaXN0SGVscCgpOwogICAgfSwKICAgIGFzeW5jIGdldExpc3RIZWxwKCkgewogICAgICB0aGlzLmRhdGFMaXN0SGVscCA9IG51bGw7CiAgICAgIHRoaXMuZGF0YUxpc3RIZWxwID0gewogICAgICAgIGxpbWl0OiB0aGlzLmxpbWl0LAogICAgICAgIG9mZnNldDogdGhpcy5vZmZzZXQsCiAgICAgICAgc3RhdHVzSWQ6IDEsIC8vIENyaWFkbwogICAgICAgIGNpdHlJZDogdGhpcy51c2VyLnVzZXIuYWRkcmVzc2VzWzBdLmNpdHkuaWQsCiAgICAgIH07CiAgICAgIGlmICh0aGlzLm5lKSB0aGlzLmRhdGFMaXN0SGVscC51c2VySWROZSA9IHRoaXMudXNlci51c2VyLmlkOwogICAgICBlbHNlIHRoaXMuZGF0YUxpc3RIZWxwLnVzZXJJZCA9IHRoaXMudXNlci51c2VyLmlkOwogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGVscC9nZXRIZWxwJywgdGhpcy5kYXRhTGlzdEhlbHApOwogICAgICB0aGlzLmhpZGRlbiA9IHRydWU7CiAgICB9LAogICAgbGlzdEFwcHJvdmVkKCkgewogICAgICBpZiAoIXRoaXMuaGlkZGVuKSByZXR1cm47CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdoZWxwL2NsZWFySGVscFN0YXRlJyk7CiAgICAgIHRoaXMucGFnZSA9IDE7CiAgICAgIHRoaXMub2Zmc2V0ID0gMDsKICAgICAgdGhpcy5nZXRMaXN0QXBwcm92ZWQoKTsKICAgIH0sCiAgICBhc3luYyBnZXRMaXN0QXBwcm92ZWQoKSB7CiAgICAgIHRoaXMuZGF0YUxpc3RBcHByb3ZlZCA9IG51bGw7CiAgICAgIHRoaXMuZGF0YUxpc3RBcHByb3ZlZCA9IHsKICAgICAgICBsaW1pdDogdGhpcy5saW1pdCwKICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LAogICAgICAgIHN0YXR1c0lkOiAyMCwgLy8gRW0gYW5kYW1lbnRvCiAgICAgIH07CiAgICAgIGlmICh0aGlzLm5lKSB7CiAgICAgICAgdGhpcy5kYXRhTGlzdEFwcHJvdmVkLnVzZXJJZE5lID0gdGhpcy51c2VyLnVzZXIuaWQ7CiAgICAgICAgdGhpcy5kYXRhTGlzdEFwcHJvdmVkLmNpdHlJZCA9IHRoaXMudXNlci51c2VyLmFkZHJlc3Nlc1swXS5jaXR5LmlkOwogICAgICB9IGVsc2UgdGhpcy5kYXRhTGlzdEFwcHJvdmVkLnVzZXJJZCA9IHRoaXMudXNlci51c2VyLmlkOwogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGVscC9nZXRIZWxwJywgdGhpcy5kYXRhTGlzdEFwcHJvdmVkKTsKICAgICAgdGhpcy5oaWRkZW4gPSBmYWxzZTsKICAgIH0sCiAgICBwYWdpbmF0aW9uSW5wdXQoZSkgewogICAgICB0aGlzLm9mZnNldCA9IHRoaXMubGltaXQgKiAoZSAtIDEpOwogICAgICB0aGlzLm9ubHlHbygpOwogICAgfSwKICAgIG5leHQoKSB7CiAgICAgIHRoaXMub2Zmc2V0ICs9IHRoaXMubGltaXQ7CiAgICAgIHRoaXMub25seUdvKCk7CiAgICB9LAogICAgcHJldmlvdXMoKSB7CiAgICAgIHRoaXMub2Zmc2V0IC09IHRoaXMubGltaXQ7CiAgICAgIHRoaXMub25seUdvKCk7CiAgICB9LAogICAgb25seUdvKCkgewogICAgICBpZiAodGhpcy5oaWRkZW4pIHRoaXMuZ2V0TGlzdEhlbHAoKTsKICAgICAgZWxzZSB0aGlzLmdldExpc3RBcHByb3ZlZCgpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxpc3RIZWxwKCk7CiAgICBpZiAodGhpcy4kcm91dGVyLmN1cnJlbnRSb3V0ZS5uYW1lID09PSAnUmVxdWVzdGVkSGVscHNVc2VyJykgewogICAgICB0aGlzLnRpdGxlID0gJ01ldXMgUGVkaWRvcyc7CiAgICAgIHRoaXMuYnRuTGFiZWwgPSAnTWFpcyBJbmZvJzsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnaGVscC9jbGVhckhlbHBTdGF0ZScpOwogIH0sCn07Cg=="},{"version":3,"sources":["HelpRequests.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuFA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HelpRequests.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"request-helps\">\n    <CardContainer :title=\"title\" backTo>\n      <div class=\"request-button my-3\">\n        <v-btn color=\"primary\"\n        :outlined=\"hidden\"\n        :text=\"!hidden\"\n        x-large\n        rounded\n        @click=\"listHelp()\"><b>Aguardando<br/>voluntários</b></v-btn>\n        <v-btn color=\"primary\"\n        :outlined=\"!hidden\"\n        :text=\"hidden\"\n        x-large\n        rounded\n        @click=\"listApproved()\"><b>Aceitos</b></v-btn>\n      </div>\n      <div class=\"request-helps-content\" v-if=\"help && help.helpList && help.helpList.length\">\n        <v-row v-if=\"hidden\" class=\"row-list\">\n          <v-col\n            cols=\"12\"\n            :sm=\"smSize()\"\n            xs=\"12\" v-for=\"(help) in help.helpList\"\n            :key=\"help.id_user\"\n          >\n            <HelpCard\n              :avatar=\"help.request_user.avatar\"\n              :id=\"help.id\"\n              :name=\"help.request_user.first_name\"\n              :age=\"$filters.calcAge(help.request_user.birth_date)\"\n              :createdat=\"$filters.formatDate(help.created)\"\n              :description=\"help.category.description\"\n              :block=\"true\"\n              :templateAccount=\"false\"\n              :btnDisable=\"btnDisable\"\n              :timeago=\"$filters.calcTimeCard(help.created)\"\n              :label=\"btnLabel\"\n            />\n          </v-col>\n        </v-row>\n        <v-row v-else class=\"row-list\">\n          <v-col\n            cols=\"12\"\n            :sm=\"smSize()\"\n            xs=\"12\"\n            v-for=\"(help) in help.helpList\" :key=\"help.id_user\"\n          >\n            <HelpCard\n              v-if=\"help.helping_users[0]\"\n              :avatar=\"help.request_user.avatar\"\n              :id=\"help.id\"\n              :name=\"help.request_user.first_name\"\n              :age=\"$filters.calcAge(help.request_user.birth_date)\"\n              :createdat=\"$filters.formatDate(help.created)\"\n              :description=\"help.category.description\"\n              :timeago=\"$filters.calcTimeCard(help.created)\"\n              :block=\"true\"\n              :templateAccount=\"true\"\n              :nameAssociate=\"help.helping_users[0].helper_user.first_name\"\n              :stateAssociate=\"help.helping_users[0].status.description\"\n              :imageAssociate=\"help.helping_users[0].helper_user.avatar\"\n              :label=\"btnLabel\"\n            />\n          </v-col>\n        </v-row>\n        <div class=\"text-center\" v-if=\"help.helpListCount > limit\">\n          <v-pagination\n            v-on:next=\"next\"\n            v-on:previous=\"previous\"\n            v-on:input=\"paginationInput\"\n            v-model=\"page\"\n            :length=\"pagesLength()\"\n            circle\n          ></v-pagination>\n        </div>\n      </div>\n      <div class=\"request-helps-content\" v-else-if=\"!help.helpLoading\">\n        <p class=\"title danger--text text-center pa-5\">Sem pedidos disponíveis</p>\n      </div>\n      <div v-else>\n        <p class=\"title danger--text text-center pa-5\">Carregando</p>\n        <v-btn loading color=\"danger\" text large block></v-btn>\n      </div>\n    </CardContainer>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport HelpCard from '@/components/HelpCard.vue';\nimport CardContainer from '@/components/CardContainer.vue';\n\nexport default {\n  components: { CardContainer, HelpCard },\n  computed: mapState(['help', 'user']),\n  props: {\n    ne: { type: Boolean },\n    btnDisable: { type: Boolean, default: false },\n  },\n  data() {\n    return {\n      hidden: false,\n      dataListHelp: null,\n      dataListApproved: null,\n      title: 'Pedidos',\n      btnLabel: null,\n      page: 1,\n      offset: 0,\n      limit: 6,\n    };\n  },\n  methods: {\n    smSize() {\n      return (this.help.helpList && this.help.helpList.length > 2) ? 6 : 12;\n    },\n    pagesLength() {\n      const plus = (this.help.helpListCount / this.limit) % 2 === 0 ? 0 : 1;\n      // eslint-disable-next-line radix\n      const ret = parseInt((this.help.helpListCount / this.limit) + plus);\n      return ret;\n    },\n    listHelp() {\n      if (this.hidden) return;\n      this.$store.dispatch('help/clearHelpState');\n      this.page = 1;\n      this.offset = 0;\n      this.getListHelp();\n    },\n    async getListHelp() {\n      this.dataListHelp = null;\n      this.dataListHelp = {\n        limit: this.limit,\n        offset: this.offset,\n        statusId: 1, // Criado\n        cityId: this.user.user.addresses[0].city.id,\n      };\n      if (this.ne) this.dataListHelp.userIdNe = this.user.user.id;\n      else this.dataListHelp.userId = this.user.user.id;\n      await this.$store.dispatch('help/getHelp', this.dataListHelp);\n      this.hidden = true;\n    },\n    listApproved() {\n      if (!this.hidden) return;\n      this.$store.dispatch('help/clearHelpState');\n      this.page = 1;\n      this.offset = 0;\n      this.getListApproved();\n    },\n    async getListApproved() {\n      this.dataListApproved = null;\n      this.dataListApproved = {\n        limit: this.limit,\n        offset: this.offset,\n        statusId: 20, // Em andamento\n      };\n      if (this.ne) {\n        this.dataListApproved.userIdNe = this.user.user.id;\n        this.dataListApproved.cityId = this.user.user.addresses[0].city.id;\n      } else this.dataListApproved.userId = this.user.user.id;\n      await this.$store.dispatch('help/getHelp', this.dataListApproved);\n      this.hidden = false;\n    },\n    paginationInput(e) {\n      this.offset = this.limit * (e - 1);\n      this.onlyGo();\n    },\n    next() {\n      this.offset += this.limit;\n      this.onlyGo();\n    },\n    previous() {\n      this.offset -= this.limit;\n      this.onlyGo();\n    },\n    onlyGo() {\n      if (this.hidden) this.getListHelp();\n      else this.getListApproved();\n    },\n  },\n  created() {\n    this.listHelp();\n    if (this.$router.currentRoute.name === 'RequestedHelpsUser') {\n      this.title = 'Meus Pedidos';\n      this.btnLabel = 'Mais Info';\n    }\n  },\n  beforeDestroy() {\n    this.$store.dispatch('help/clearHelpState');\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.request-helps{\n  height: 100%;\n  &-content {\n    min-width: 400px;\n    min-height: 500px;\n    @media screen and ( max-width: 600px) { min-width: 100%; }\n  }\n}\n.request-button{\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n}\n.row-list{\n  min-height: 500px;\n}\n</style>\n"]}]}