{"remainingRequest":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manoel/Documents/conta-comigo-app-front/src/components/detailstabs/TabEndereco.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/manoel/Documents/conta-comigo-app-front/src/components/detailstabs/TabEndereco.vue","mtime":1587946367346},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RhYlBlc3NvYWwnLAogIGNvbXBvbmVudHM6IHt9LAogIGNvbXB1dGVkOiBtYXBTdGF0ZShbJ3VzZXInLCAnYWRkcmVzcyddKSwKICB3YXRjaDogewogICAgY2VwKGNlcCkgewogICAgICBpZiAoY2VwICYmIGNlcC5sZW5ndGggPT09IDkpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYWRkcmVzcy9maW5kQnlaaXAnLCBjZXApOwogICAgICB9CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgcmVzZXREYXRhKCkgewogICAgICB0aGlzLmVkaXQgPSBmYWxzZTsKICAgIH0sCiAgICB1cGRhdGVEYXRhKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5lbmRlcmVjb2Zvcm0udmFsaWRhdGUoKSkgewogICAgICAgIGNvbnN0IGNlcCA9IHRoaXMuY2VwLnJlcGxhY2UoLy0vZywgJycpOwogICAgICAgIGNvbnN0IGRhdGEgPSB7CiAgICAgICAgICB1c2VyX2FkZHJlc3NfaWQ6IHRoaXMudXNlci51c2VyLmFkZHJlc3Nlc1swXS5pZCwKICAgICAgICAgIG5laWdoYm9yaG9vZF9pZDogdGhpcy5iYWlycm8sCiAgICAgICAgICBhZGRyZXNzOiB0aGlzLmVuZGVyZWNvLAogICAgICAgICAgemlwOiBjZXAsCiAgICAgICAgfTsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci91cGRhdGVBZGRyZXNzJywgZGF0YSkKICAgICAgICAgIC50aGVuKCgpID0+IHsgdGhpcy5lZGl0ID0gZmFsc2U7IH0pOwogICAgICB9CiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNlcDogJycsCiAgICAgIGNlcE1hc2s6ICcjIyMjIy0jIyMnLAogICAgICBlbmRlcmVjbzogJycsCiAgICAgIGJhaXJybzogJycsCiAgICAgIGJhaXJyb3M6IFtdLAogICAgICBjaWRhZGU6ICcnLAogICAgICBlc3RhZG86ICcnLAogICAgICBlZGl0OiBmYWxzZSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5jZXAgPSB0aGlzLnVzZXIudXNlci5hZGRyZXNzZXNbMF0uemlwX2NvZGU7CiAgICB0aGlzLmVuZGVyZWNvID0gdGhpcy51c2VyLnVzZXIuYWRkcmVzc2VzWzBdLmFkZHJlc3M7CgogICAgdGhpcy4kc3RvcmUud2F0Y2goCiAgICAgIChzdGF0ZSkgPT4gc3RhdGUuYWRkcmVzcywKICAgICAgKHZhbCkgPT4gewogICAgICAgIGlmICh0aGlzLmVuZGVyZWNvICE9PSB2YWwuZW5kZXJlY28gJiYgdGhpcy5lZGl0KSB0aGlzLmVuZGVyZWNvID0gdmFsLmVuZGVyZWNvOwogICAgICAgIGlmICh0aGlzLmJhaXJyb3MgIT09IHZhbC5iYWlycm9zKSB0aGlzLmJhaXJybyA9IHZhbC5iYWlycm87CiAgICAgICAgaWYgKHRoaXMuY2lkYWRlICE9PSB2YWwuY2lkYWRlKSB0aGlzLmNpZGFkZSA9IHZhbC5jaWRhZGU7CiAgICAgICAgaWYgKHRoaXMuZXN0YWRvICE9PSB2YWwuZXN0YWRvKSB0aGlzLmVzdGFkbyA9IHZhbC5lc3RhZG87CiAgICAgIH0sIHsgZGVlcDogdHJ1ZSB9LAogICAgKTsKICB9LAp9Owo="},{"version":3,"sources":["TabEndereco.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabEndereco.vue","sourceRoot":"src/components/detailstabs","sourcesContent":["<template>\n  <div>\n    <v-form ref=\"enderecoform\">\n      <v-row justify=\"end\" class=\"mb-0 pa-4\">\n        <v-switch\n          color=\"primary\"\n          v-model=\"edit\"\n          label=\"Editar\"\n        />\n      </v-row>\n      <v-row class=\"mb-0\">\n        <v-col :cols=\"12\" class=\"py-0\">\n          <v-text-field\n            :readonly=\"!edit\"\n            outlined\n            label=\"Cep\"\n            v-mask=\"cepMask\"\n            :rules=\"[$vln.requiredRule('Cep')]\"\n            required\n            v-model=\"cep\"\n          ></v-text-field>\n        </v-col>\n        <v-col :cols=\"12\" class=\"py-0\">\n          <v-text-field\n            :readonly=\"!edit\"\n            outlined\n            label=\"Endereço\"\n            :rules=\"[$vln.requiredRule('Endereço')]\"\n            required\n            v-model=\"endereco\"\n          ></v-text-field>\n        </v-col>\n      </v-row>\n      <v-row>\n        <v-col :cols=\"12\" class=\"py-0\">\n          <v-select\n            :readonly=\"(bairros.length <= 1)\"\n            item-value=\"id\"\n            item-text=\"description\"\n            :items=\"address.bairros\"\n            v-model=\"bairro\"\n            outlined\n            menu-props=\"auto\"\n            label=\"Bairro\"\n            :rules=\"[$vln.requiredRule('Bairro')]\"\n            required\n          ></v-select>\n        </v-col>\n        <v-col :cols=\"12\" class=\"py-0\">\n          <v-text-field\n            :readonly=\"true\"\n            outlined\n            label=\"Cidade\"\n            :rules=\"[$vln.requiredRule('Cidade')]\"\n            required\n            v-model=\"cidade\"\n          ></v-text-field>\n        </v-col>\n        <v-col class=\"py-0\">\n          <v-text-field\n            :readonly=\"true\"\n            outlined\n            label=\"Estado\"\n            :rules=\"[$vln.requiredRule('Estado')]\"\n            required\n            v-model=\"estado\"\n          ></v-text-field>\n        </v-col>\n      </v-row>\n      <p v-if=\"user.userError\"\n       class=\"block text-center mt-4 red--text\">{{user.userError}}</p>\n      <v-row justify=\"end\" class=\"px-5\" v-if=\"edit\">\n        <v-btn\n          large\n          color=\"primary\"\n          rounded\n          :loading=\"user.userLoading\"\n          @click=\"updateData\"\n        >Salvar</v-btn>\n      </v-row>\n    </v-form>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\n\nexport default {\n  name: 'TabPessoal',\n  components: {},\n  computed: mapState(['user', 'address']),\n  watch: {\n    cep(cep) {\n      if (cep && cep.length === 9) {\n        this.$store.dispatch('address/findByZip', cep);\n      }\n    },\n  },\n  methods: {\n    resetData() {\n      this.edit = false;\n    },\n    updateData() {\n      if (this.$refs.enderecoform.validate()) {\n        const cep = this.cep.replace(/-/g, '');\n        const data = {\n          user_address_id: this.user.user.addresses[0].id,\n          neighborhood_id: this.bairro,\n          address: this.endereco,\n          zip: cep,\n        };\n        this.$store.dispatch('user/updateAddress', data)\n          .then(() => { this.edit = false; });\n      }\n    },\n  },\n  data() {\n    return {\n      cep: '',\n      cepMask: '#####-###',\n      endereco: '',\n      bairro: '',\n      bairros: [],\n      cidade: '',\n      estado: '',\n      edit: false,\n    };\n  },\n  created() {\n    this.cep = this.user.user.addresses[0].zip_code;\n    this.endereco = this.user.user.addresses[0].address;\n\n    this.$store.watch(\n      (state) => state.address,\n      (val) => {\n        if (this.endereco !== val.endereco && this.edit) this.endereco = val.endereco;\n        if (this.bairros !== val.bairros) this.bairro = val.bairro;\n        if (this.cidade !== val.cidade) this.cidade = val.cidade;\n        if (this.estado !== val.estado) this.estado = val.estado;\n      }, { deep: true },\n    );\n  },\n};\n</script>\n"]}]}