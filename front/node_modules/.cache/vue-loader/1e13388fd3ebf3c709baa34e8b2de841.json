{"remainingRequest":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manoel/Documents/conta-comigo-app-front/src/components/HelpRequests.vue?vue&type=style&index=0&id=69ebbbd5&lang=scss&scoped=true&","dependencies":[{"path":"/home/manoel/Documents/conta-comigo-app-front/src/components/HelpRequests.vue","mtime":1588712449318},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucmVxdWVzdC1oZWxwc3sKICBoZWlnaHQ6IDEwMCU7CiAgJi1jb250ZW50IHsKICAgIG1pbi13aWR0aDogNDAwcHg7CiAgICBtaW4taGVpZ2h0OiA1MDBweDsKICAgIEBtZWRpYSBzY3JlZW4gYW5kICggbWF4LXdpZHRoOiA2MDBweCkgeyBtaW4td2lkdGg6IDEwMCU7IH0KICB9Cn0KLnJlcXVlc3QtYnV0dG9uewogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7Cn0KLnJvdy1saXN0ewogIG1pbi1oZWlnaHQ6IDUwMHB4Owp9Cg=="},{"version":3,"sources":["HelpRequests.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HelpRequests.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"request-helps\">\n    <CardContainer :title=\"title\" backTo>\n      <div class=\"request-button my-3\">\n        <v-btn color=\"primary\"\n        :outlined=\"hidden\"\n        :text=\"!hidden\"\n        x-large\n        rounded\n        @click=\"listHelp()\"><b>Aguardando<br/>voluntários</b></v-btn>\n        <v-btn color=\"primary\"\n        :outlined=\"!hidden\"\n        :text=\"hidden\"\n        x-large\n        rounded\n        @click=\"listApproved()\"><b>Aceitos</b></v-btn>\n      </div>\n      <div class=\"request-helps-content\" v-if=\"help && help.helpList && help.helpList.length\">\n        <v-row v-if=\"hidden\" class=\"row-list\">\n          <v-col\n            cols=\"12\"\n            :sm=\"smSize()\"\n            xs=\"12\" v-for=\"(help) in help.helpList\"\n            :key=\"help.id_user\"\n          >\n            <HelpCard\n              :avatar=\"help.request_user.avatar\"\n              :id=\"help.id\"\n              :name=\"help.request_user.first_name\"\n              :age=\"$filters.calcAge(help.request_user.birth_date)\"\n              :createdat=\"$filters.formatDate(help.created)\"\n              :description=\"help.category.description\"\n              :block=\"true\"\n              :templateAccount=\"false\"\n              :btnDisable=\"btnDisable\"\n              :timeago=\"$filters.calcTimeCard(help.created)\"\n              :label=\"btnLabel\"\n            />\n          </v-col>\n        </v-row>\n        <v-row v-else class=\"row-list\">\n          <v-col\n            cols=\"12\"\n            :sm=\"smSize()\"\n            xs=\"12\"\n            v-for=\"(help) in help.helpList\" :key=\"help.id_user\"\n          >\n            <HelpCard\n              v-if=\"help.helping_users[0]\"\n              :avatar=\"help.request_user.avatar\"\n              :id=\"help.id\"\n              :name=\"help.request_user.first_name\"\n              :age=\"$filters.calcAge(help.request_user.birth_date)\"\n              :createdat=\"$filters.formatDate(help.created)\"\n              :description=\"help.category.description\"\n              :timeago=\"$filters.calcTimeCard(help.created)\"\n              :block=\"true\"\n              :templateAccount=\"true\"\n              :nameAssociate=\"help.helping_users[0].helper_user.first_name\"\n              :stateAssociate=\"help.helping_users[0].status.description\"\n              :imageAssociate=\"help.helping_users[0].helper_user.avatar\"\n              :label=\"btnLabel\"\n            />\n          </v-col>\n        </v-row>\n        <div class=\"text-center\" v-if=\"help.helpListCount > limit\">\n          <v-pagination\n            v-on:next=\"next\"\n            v-on:previous=\"previous\"\n            v-on:input=\"paginationInput\"\n            v-model=\"page\"\n            :length=\"pagesLength()\"\n            circle\n          ></v-pagination>\n        </div>\n      </div>\n      <div class=\"request-helps-content\" v-else-if=\"!help.helpLoading\">\n        <p class=\"title danger--text text-center pa-5\">Sem pedidos disponíveis</p>\n      </div>\n      <div v-else>\n        <p class=\"title danger--text text-center pa-5\">Carregando</p>\n        <v-btn loading color=\"danger\" text large block></v-btn>\n      </div>\n    </CardContainer>\n  </div>\n</template>\n<script>\nimport { mapState } from 'vuex';\nimport HelpCard from '@/components/HelpCard.vue';\nimport CardContainer from '@/components/CardContainer.vue';\n\nexport default {\n  components: { CardContainer, HelpCard },\n  computed: mapState(['help', 'user']),\n  props: {\n    ne: { type: Boolean },\n    btnDisable: { type: Boolean, default: false },\n  },\n  data() {\n    return {\n      hidden: false,\n      dataListHelp: null,\n      dataListApproved: null,\n      title: 'Pedidos',\n      btnLabel: null,\n      page: 1,\n      offset: 0,\n      limit: 6,\n    };\n  },\n  methods: {\n    smSize() {\n      return (this.help.helpList && this.help.helpList.length > 2) ? 6 : 12;\n    },\n    pagesLength() {\n      const plus = (this.help.helpListCount / this.limit) % 2 === 0 ? 0 : 1;\n      // eslint-disable-next-line radix\n      const ret = parseInt((this.help.helpListCount / this.limit) + plus);\n      return ret;\n    },\n    listHelp() {\n      if (this.hidden) return;\n      this.$store.dispatch('help/clearHelpState');\n      this.page = 1;\n      this.offset = 0;\n      this.getListHelp();\n    },\n    async getListHelp() {\n      this.dataListHelp = null;\n      this.dataListHelp = {\n        limit: this.limit,\n        offset: this.offset,\n        statusId: 1, // Criado\n        cityId: this.user.user.addresses[0].city.id,\n      };\n      if (this.ne) this.dataListHelp.userIdNe = this.user.user.id;\n      else this.dataListHelp.userId = this.user.user.id;\n      await this.$store.dispatch('help/getHelp', this.dataListHelp);\n      this.hidden = true;\n    },\n    listApproved() {\n      if (!this.hidden) return;\n      this.$store.dispatch('help/clearHelpState');\n      this.page = 1;\n      this.offset = 0;\n      this.getListApproved();\n    },\n    async getListApproved() {\n      this.dataListApproved = null;\n      this.dataListApproved = {\n        limit: this.limit,\n        offset: this.offset,\n        statusId: 20, // Em andamento\n      };\n      if (this.ne) {\n        this.dataListApproved.userIdNe = this.user.user.id;\n        this.dataListApproved.cityId = this.user.user.addresses[0].city.id;\n      } else this.dataListApproved.userId = this.user.user.id;\n      await this.$store.dispatch('help/getHelp', this.dataListApproved);\n      this.hidden = false;\n    },\n    paginationInput(e) {\n      this.offset = this.limit * (e - 1);\n      this.onlyGo();\n    },\n    next() {\n      this.offset += this.limit;\n      this.onlyGo();\n    },\n    previous() {\n      this.offset -= this.limit;\n      this.onlyGo();\n    },\n    onlyGo() {\n      if (this.hidden) this.getListHelp();\n      else this.getListApproved();\n    },\n  },\n  created() {\n    this.listHelp();\n    if (this.$router.currentRoute.name === 'RequestedHelpsUser') {\n      this.title = 'Meus Pedidos';\n      this.btnLabel = 'Mais Info';\n    }\n  },\n  beforeDestroy() {\n    this.$store.dispatch('help/clearHelpState');\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.request-helps{\n  height: 100%;\n  &-content {\n    min-width: 400px;\n    min-height: 500px;\n    @media screen and ( max-width: 600px) { min-width: 100%; }\n  }\n}\n.request-button{\n  width: 100%;\n  display: flex;\n  justify-content: space-around;\n}\n.row-list{\n  min-height: 500px;\n}\n</style>\n"]}]}