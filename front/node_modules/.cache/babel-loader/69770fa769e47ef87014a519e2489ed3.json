{"remainingRequest":"/home/manoel/Documents/conta-comigo-app-front/node_modules/thread-loader/dist/cjs.js!/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js!/home/manoel/Documents/conta-comigo-app-front/node_modules/eslint-loader/index.js??ref--13-0!/home/manoel/Documents/conta-comigo-app-front/src/plugins/NotificationClient.js","dependencies":[{"path":"/home/manoel/Documents/conta-comigo-app-front/src/plugins/NotificationClient.js","mtime":1588712449318},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL21hbm9lbC9Eb2N1bWVudHMvY29udGEtY29taWdvLWFwcC1mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvbWFub2VsL0RvY3VtZW50cy9jb250YS1jb21pZ28tYXBwLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvbWFub2VsL0RvY3VtZW50cy9jb250YS1jb21pZ28tYXBwLWZyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CnZhciBub3RpZmljYXRpb25BY3Rpb25zID0gewogIHNob3dOb3RpZmljYXRpb246IGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKSB7CiAgICBzdG9yZS5kaXNwYXRjaCgnbm90aWZpY2F0aW9uL3Nob3dOb3RpZmljYXRpb24nLCBub3RpZmljYXRpb24pOwogIH0KfTsKdmFyIEhFQVJUQkVBVCA9ICctLWhlYXJ0YmVhdC0tJzsKCnZhciBXUzRSZWRpcyA9IGZ1bmN0aW9uIFdTNFJlZGlzKG9wdGlvbnMpIHsKICB2YXIgX3RoaXMgPSB0aGlzOwoKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV1M0UmVkaXMpOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdlbmVyYXRlSW50ZXZhbCIsIGZ1bmN0aW9uIChrKSB7CiAgICB2YXIgbWF4SW50ZXJ2YWwgPSAoTWF0aC5wb3coMiwgaykgLSAxKSAqIDEwMDA7IC8vIElmIHRoZSBnZW5lcmF0ZWQgaW50ZXJ2YWwgaXMgbW9yZSB0aGFuIDMwIHNlY29uZHMsIHRydW5jYXRlIGl0IGRvd24gdG8gMzAgc2Vjb25kcy4KCiAgICBpZiAobWF4SW50ZXJ2YWwgPiAzMCAqIDEwMDApIHsKICAgICAgbWF4SW50ZXJ2YWwgPSAzMCAqIDEwMDA7CiAgICB9IC8vIGdlbmVyYXRlIHRoZSBpbnRlcnZhbCB0byBhIHJhbmRvbSBudW1iZXIgYmV0d2VlbiAwIGFuZCB0aGUKICAgIC8vIG1heEludGVydmFsIGRldGVybWluZWQgZnJvbSBhYm92ZQoKCiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIG1heEludGVydmFsOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzQ2xvc2luZyIsIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBfdGhpcy53cyAmJiBfdGhpcy53cy5yZWFkeVN0YXRlID09PSAyOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzQ2xvc2VkIiwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF90aGlzLndzICYmIF90aGlzLndzLnJlYWR5U3RhdGUgPT09IDM7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAic2VuZEhlYXJ0YmVhdCIsIGZ1bmN0aW9uICgpIHsKICAgIHRyeSB7CiAgICAgIF90aGlzLm1pc3NlZEhlYXJ0YmVhdHMgKz0gMTsKCiAgICAgIGlmIChfdGhpcy5taXNzZWRIZWFydGJlYXRzID4gMykgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVG9vIG1hbnkgbWlzc2VkIGhlYXJ0YmVhdHMuJyk7CiAgICAgIH0KCiAgICAgIF90aGlzLndzLnNlbmQoX3RoaXMub3B0cy5oZWFydGJlYXRfbXNnKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY2xlYXJJbnRlcnZhbChfdGhpcy5oZWFydGJlYXRJbnRlcnZhbCk7CiAgICAgIF90aGlzLmhlYXJ0YmVhdEludGVydmFsID0gbnVsbDsgLy8gY29uc29sZS53YXJuKGBDbG9zaW5nIHdlYnNvY2tldCBjb25uZWN0aW9uLiBSZWFzb246ICR7ZS5tZXNzYWdlfWApOwoKICAgICAgaWYgKCFfdGhpcy5pc0Nsb3NpbmcoKSAmJiAhX3RoaXMuaXNDbG9zZWQoKSkgewogICAgICAgIF90aGlzLndzLmNsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJvbk9wZW4iLCBmdW5jdGlvbiAoKSB7CiAgICAvLyBuZXcgY29ubmVjdGlvbiwgcmVzZXQgYXR0ZW1wcyBjb3VudGVyCiAgICBfdGhpcy5hdHRlbXB0cyA9IDE7CgogICAgaWYgKF90aGlzLm9wdHMuaGVhcnRiZWF0X21zZyAmJiBfdGhpcy5oZWFydGJlYXRJbnRlcnZhbCA9PT0gbnVsbCkgewogICAgICBfdGhpcy5taXNzZWRIZWFydGJlYXRzID0gMDsKICAgICAgX3RoaXMuaGVhcnRiZWF0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChfdGhpcy5zZW5kSGVhcnRiZWF0LCA1MDAwKTsKICAgIH0KCiAgICBpZiAodHlwZW9mIF90aGlzLm9wdHMuY29ubmVjdGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIF90aGlzLm9wdHMuY29ubmVjdGVkKCk7CiAgICB9CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib25FcnJvciIsIGZ1bmN0aW9uICgpIHsvLyBjb25zb2xlLmVycm9yKCdXZWJzb2NrZXQgY29ubmVjdGlvbiBpcyBicm9rZW4hJyk7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAib25NZXNzYWdlIiwgZnVuY3Rpb24gKGV2dCkgewogICAgaWYgKF90aGlzLm9wdHMuaGVhcnRiZWF0X21zZyAmJiBldnQuZGF0YSA9PT0gX3RoaXMub3B0cy5oZWFydGJlYXRfbXNnKSB7CiAgICAgIC8vIHJlc2V0IHRoZSBjb3VudGVyIGZvciBtaXNzZWQgaGVhcnRiZWF0cwogICAgICBfdGhpcy5taXNzZWRIZWFydGJlYXRzID0gMDsKICAgIH0KCiAgICBpZiAodHlwZW9mIF90aGlzLm9wdHMucmVjZWl2ZV9tZXNzYWdlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIF90aGlzLm9wdHMucmVjZWl2ZV9tZXNzYWdlKGV2dC5kYXRhKTsKICAgIH0KICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzZW5kTWVzc2FnZSIsIGZ1bmN0aW9uIChtZXNzYWdlKSB7CiAgICBfdGhpcy53cy5zZW5kKG1lc3NhZ2UpOwogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgImdldFN0YXRlIiwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF90aGlzLndzLnJlYWR5U3RhdGU7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXNDb25uZWN0aW5nIiwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIF90aGlzLndzICYmIF90aGlzLndzLnJlYWR5U3RhdGUgPT09IDA7CiAgfSk7CgogIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiaXNDb25uZWN0ZWQiLCBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gX3RoaXMud3MgJiYgX3RoaXMud3MucmVhZHlTdGF0ZSA9PT0gMTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjbG9zZSIsIGZ1bmN0aW9uICgpIHsKICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMuaGVhcnRiZWF0SW50ZXJ2YWwpOwogICAgX3RoaXMubXVzdFJlY29ubmVjdCA9IGZhbHNlOwoKICAgIGlmICghX3RoaXMuaXNDbG9zaW5nKCkgfHwgIV90aGlzLmlzQ2xvc2VkKCkpIHsKICAgICAgX3RoaXMud3MuY2xvc2UoKTsKICAgIH0KICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJ0cnlUb1JlY29ubmVjdCIsIGZ1bmN0aW9uICgpIHsKICAgIGlmIChfdGhpcy5tdXN0UmVjb25uZWN0ICYmICFfdGhpcy50aW1lcikgewogICAgICAvLyBjb25zb2xlLmxvZygnUmVjb25uZWN0aW5nLi4uJyk7CiAgICAgIHZhciBpbnRlcnZhbCA9IF90aGlzLmdlbmVyYXRlSW50ZXZhbChfdGhpcy5hdHRlbXB0cyk7CgogICAgICBfdGhpcy50aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmF0dGVtcHRzICs9IDE7CgogICAgICAgIF90aGlzLmNvbm5lY3QoX3RoaXMud3MudXJsKTsKICAgICAgfSwgaW50ZXJ2YWwpOwogICAgfQogIH0pOwoKICBfZGVmaW5lUHJvcGVydHkodGhpcywgIm9uQ2xvc2UiLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAvLyBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBjbG9zZWQhJyk7CiAgICBpZiAodHlwZW9mIF90aGlzLm9wdHMuZGlzY29ubmVjdGVkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIF90aGlzLm9wdHMuZGlzY29ubmVjdGVkKGV2dCk7CiAgICB9CgogICAgX3RoaXMudHJ5VG9SZWNvbm5lY3QoKTsKICB9KTsKCiAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJjb25uZWN0IiwgZnVuY3Rpb24gKHVyaSkgewogICAgdHJ5IHsKICAgICAgaWYgKF90aGlzLndzICYmIChfdGhpcy5pc0Nvbm5lY3RpbmcoKSB8fCBfdGhpcy5pc0Nvbm5lY3RlZCgpKSkgewogICAgICAgIC8vIGNvbnNvbGUubG9nKCdXZWJzb2NrZXQgaXMgY29ubmVjdGluZyBvciBhbHJlYWR5IGNvbm5lY3RlZC4nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgX3RoaXMub3B0cy5jb25uZWN0aW5nID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgX3RoaXMub3B0cy5jb25uZWN0aW5nKCk7CiAgICAgIH0gLy8gY29uc29sZS5sb2coYENvbm5lY3RpbmcgdG8gJHt1cml9IC4uLmApOwoKCiAgICAgIF90aGlzLndzID0gbmV3IFdlYlNvY2tldCh1cmkpOwogICAgICBfdGhpcy53cy5vbm9wZW4gPSBfdGhpcy5vbk9wZW47CiAgICAgIF90aGlzLndzLm9ubWVzc2FnZSA9IF90aGlzLm9uTWVzc2FnZTsKICAgICAgX3RoaXMud3Mub25lcnJvciA9IF90aGlzLm9uRXJyb3I7CiAgICAgIF90aGlzLndzLm9uY2xvc2UgPSBfdGhpcy5vbkNsb3NlOwogICAgICBfdGhpcy50aW1lciA9IG51bGw7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX3RoaXMudHJ5VG9SZWNvbm5lY3QoKTsKICAgIH0KICB9KTsKCiAgdGhpcy5vcHRzID0gX29iamVjdFNwcmVhZCh7fSwgewogICAgaGVhcnRiZWF0X21zZzogbnVsbAogIH0sIHt9LCBvcHRpb25zKTsKCiAgaWYgKG9wdGlvbnMudXJpID09PSB1bmRlZmluZWQpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm8gV2Vic29ja2V0IFVSSSBpbiBvcHRpb25zJyk7CiAgfQoKICB0aGlzLndzID0gbnVsbDsKICB0aGlzLnRpbWVyID0gbnVsbDsKICB0aGlzLmF0dGVtcHRzID0gMTsKICB0aGlzLm11c3RSZWNvbm5lY3QgPSB0cnVlOwogIHRoaXMuaGVhcnRiZWF0SW50ZXJ2YWwgPSBudWxsOwogIHRoaXMubWlzc2VkSGVhcnRiZWF0cyA9IDA7CiAgdGhpcy5jb25uZWN0KHRoaXMub3B0cy51cmkpOwp9IC8vIHRoaXMgY29kZSBpcyBib3Jyb3dlZCBmcm9tIGh0dHA6Ly9ibG9nLmpvaG5yeWRpbmcuY29tL3Bvc3QvNzg1NDQ5NjkzNDkvCi8vCi8vIEdlbmVyYXRlIGFuIGludGVydmFsIHRoYXQgaXMgcmFuZG9tbHkgYmV0d2VlbiAwIGFuZCAyXmsgLSAxLCB3aGVyZSBrIGlzCi8vIHRoZSBudW1iZXIgb2YgY29ubmVjdGlvbiBhdHRtcHRzLCB3aXRoIGEgbWF4aW11bSBpbnRlcnZhbCBvZiAzMCBzZWNvbmRzLAovLyBzbyBpdCBzdGFydHMgYXQgMCAtIDEgc2Vjb25kcyBhbmQgbWF4ZXMgb3V0IGF0IDAgLSAzMCBzZWNvbmRzCjsKCmZ1bmN0aW9uIG9uQ29ubmVjdGluZygpIHsvLyBjb25zb2xlLmxvZygnV2Vic29ja2V0IGlzIGNvbm5lY3RpbmcuLi4nKTsKfQoKZnVuY3Rpb24gb25Db25uZWN0ZWQoKSB7Ly8gY29uc29sZS5sb2coJ0Nvbm5lY3RlZCcpOwp9CgpmdW5jdGlvbiBvbkRpc2Nvbm5lY3RlZCgpIHt9IC8vIGNvbnNvbGUubG9nKGBXZWJzb2NrZXQgd2FzIGRpc2Nvbm5lY3RlZDogJHtKU09OLnN0cmluZ2lmeShldnQpfWApOwovLyByZWNlaXZlIGEgbWVzc2FnZSB0aG91Z2ggdGhlIHdlYnNvY2tldCBmcm9tIHRoZSBzZXJ2ZXIKCgpmdW5jdGlvbiByZWNlaXZlTWVzc2FnZShtc2cpIHsKICBpZiAobXNnICE9PSBIRUFSVEJFQVQpIHsKICAgIHZhciBtc2dPYmogPSBKU09OLnBhcnNlKG1zZyk7CiAgICB2YXIgbiA9IHsKICAgICAgaWQ6IG1zZ09iai5pZCwKICAgICAgZGVzY3JpcHRpb246IG1zZ09iai5jb250ZW50LAogICAgICB0eXBlOiBtc2dPYmoudHlwZV9pZCwKICAgICAgc3RhdHVzOiAwCiAgICB9OwogICAgbm90aWZpY2F0aW9uQWN0aW9ucy5zaG93Tm90aWZpY2F0aW9uKG4pOwogIH0gLy8gY29uc29sZS5sb2coYE1lc3NhZ2UgZnJvbSBXZWJzb2NrZXQ6ICR7bXNnfWApOwoKfQoKdmFyIGNsaWVudCA9IG51bGw7Cgp2YXIgY29ubmVjdCA9IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgY2xpZW50ID0gbmV3IFdTNFJlZGlzKHsKICAgIHVyaTogJ3dzOi8vY29udGEtY29taWdvLWFwLmhlcm9rdWFwcC5jb20vd3MvZnJvbnRlbmQ/c3Vic2NyaWJlLXVzZXInLAogICAgY29ubmVjdGluZzogb25Db25uZWN0aW5nLAogICAgY29ubmVjdGVkOiBvbkNvbm5lY3RlZCwKICAgIHJlY2VpdmVfbWVzc2FnZTogcmVjZWl2ZU1lc3NhZ2UsCiAgICBkaXNjb25uZWN0ZWQ6IG9uRGlzY29ubmVjdGVkLAogICAgaGVhcnRiZWF0X21zZzogSEVBUlRCRUFUCiAgfSk7Cn07Cgp2YXIgZGlzY29ubmVjdCA9IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgY2xpZW50LmNsb3NlKCk7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgc3RhcnRMaXN0ZW5pbmc6IGZ1bmN0aW9uIHN0YXJ0TGlzdGVuaW5nKCkgewogICAgY29ubmVjdCgpOwogIH0sCiAgc3RvcExpc3RlbmluZzogZnVuY3Rpb24gc3RvcExpc3RlbmluZygpIHsKICAgIGRpc2Nvbm5lY3QoKTsKICB9Cn07"},{"version":3,"sources":["/home/manoel/Documents/conta-comigo-app-front/src/plugins/NotificationClient.js"],"names":["store","notificationActions","showNotification","notification","dispatch","HEARTBEAT","WS4Redis","options","k","maxInterval","Math","random","ws","readyState","missedHeartbeats","Error","send","opts","heartbeat_msg","e","clearInterval","heartbeatInterval","isClosing","isClosed","close","attempts","setInterval","sendHeartbeat","connected","evt","data","receive_message","message","mustReconnect","timer","interval","generateInteval","setTimeout","connect","url","disconnected","tryToReconnect","uri","isConnecting","isConnected","connecting","WebSocket","onopen","onOpen","onmessage","onMessage","onerror","onError","onclose","onClose","err","undefined","onConnecting","onConnected","onDisconnected","receiveMessage","msg","msgObj","JSON","parse","n","id","description","content","type","type_id","status","client","disconnect","startListening","stopListening"],"mappings":"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","sourcesContent":["import store from '../store';\n\nconst notificationActions = {\n  showNotification: (notification) => {\n    store.dispatch('notification/showNotification', notification);\n  },\n};\n\nconst HEARTBEAT = '--heartbeat--';\n\nclass WS4Redis {\n  constructor(options) {\n    this.opts = { ...{ heartbeat_msg: null }, ...options };\n\n    if (options.uri === undefined) {\n      throw new Error('No Websocket URI in options');\n    }\n\n    this.ws = null;\n    this.timer = null;\n    this.attempts = 1;\n    this.mustReconnect = true;\n    this.heartbeatInterval = null;\n    this.missedHeartbeats = 0;\n\n    this.connect(this.opts.uri);\n  }\n\n  // this code is borrowed from http://blog.johnryding.com/post/78544969349/\n  //\n  // Generate an interval that is randomly between 0 and 2^k - 1, where k is\n  // the number of connection attmpts, with a maximum interval of 30 seconds,\n  // so it starts at 0 - 1 seconds and maxes out at 0 - 30 seconds\n  generateInteval = (k) => {\n    let maxInterval = (2 ** k - 1) * 1000;\n\n    // If the generated interval is more than 30 seconds, truncate it down to 30 seconds.\n    if (maxInterval > 30 * 1000) {\n      maxInterval = 30 * 1000;\n    }\n\n    // generate the interval to a random number between 0 and the\n    // maxInterval determined from above\n    return Math.random() * maxInterval;\n  }\n\n  isClosing = () => this.ws && this.ws.readyState === 2;\n\n  isClosed = () => this.ws && this.ws.readyState === 3;\n\n  sendHeartbeat = () => {\n    try {\n      this.missedHeartbeats += 1;\n      if (this.missedHeartbeats > 3) {\n        throw new Error('Too many missed heartbeats.');\n      }\n      this.ws.send(this.opts.heartbeat_msg);\n    } catch (e) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n      // console.warn(`Closing websocket connection. Reason: ${e.message}`);\n      if (!this.isClosing() && !this.isClosed()) {\n        this.ws.close();\n      }\n    }\n  }\n\n  onOpen = () => {\n    // new connection, reset attemps counter\n    this.attempts = 1;\n    if (this.opts.heartbeat_msg && this.heartbeatInterval === null) {\n      this.missedHeartbeats = 0;\n      this.heartbeatInterval = setInterval(this.sendHeartbeat, 5000);\n    }\n    if (typeof this.opts.connected === 'function') {\n      this.opts.connected();\n    }\n  }\n\n  onError = () => {\n    // console.error('Websocket connection is broken!');\n  }\n\n  onMessage = (evt) => {\n    if (this.opts.heartbeat_msg && evt.data === this.opts.heartbeat_msg) {\n      // reset the counter for missed heartbeats\n      this.missedHeartbeats = 0;\n    }\n\n    if (typeof this.opts.receive_message === 'function') {\n      this.opts.receive_message(evt.data);\n    }\n  }\n\n  sendMessage = (message) => {\n    this.ws.send(message);\n  };\n\n  getState = () => this.ws.readyState;\n\n  isConnecting = () => this.ws && this.ws.readyState === 0;\n\n  isConnected = () => this.ws && this.ws.readyState === 1;\n\n  close = () => {\n    clearInterval(this.heartbeatInterval);\n    this.mustReconnect = false;\n    if (!this.isClosing() || !this.isClosed()) {\n      this.ws.close();\n    }\n  };\n\n  tryToReconnect = () => {\n    if (this.mustReconnect && !this.timer) {\n      // console.log('Reconnecting...');\n      const interval = this.generateInteval(this.attempts);\n      this.timer = setTimeout(() => {\n        this.attempts += 1;\n        this.connect(this.ws.url);\n      }, interval);\n    }\n  }\n\n  onClose = (evt) => {\n    // console.log('Connection closed!');\n    if (typeof this.opts.disconnected === 'function') {\n      this.opts.disconnected(evt);\n    }\n    this.tryToReconnect();\n  }\n\n  connect = (uri) => {\n    try {\n      if (this.ws && (this.isConnecting() || this.isConnected())) {\n        // console.log('Websocket is connecting or already connected.');\n        return;\n      }\n\n      if (typeof this.opts.connecting === 'function') {\n        this.opts.connecting();\n      }\n\n      // console.log(`Connecting to ${uri} ...`);\n      this.ws = new WebSocket(uri);\n      this.ws.onopen = this.onOpen;\n      this.ws.onmessage = this.onMessage;\n      this.ws.onerror = this.onError;\n      this.ws.onclose = this.onClose;\n      this.timer = null;\n    } catch (err) {\n      this.tryToReconnect();\n    }\n  }\n}\n\nfunction onConnecting() {\n  // console.log('Websocket is connecting...');\n}\n\nfunction onConnected() {\n  // console.log('Connected');\n}\n\nfunction onDisconnected() {\n  // console.log(`Websocket was disconnected: ${JSON.stringify(evt)}`);\n}\n\n// receive a message though the websocket from the server\nfunction receiveMessage(msg) {\n  if (msg !== HEARTBEAT) {\n    const msgObj = JSON.parse(msg);\n    const n = {\n      id: msgObj.id,\n      description: msgObj.content,\n      type: msgObj.type_id,\n      status: 0,\n    };\n\n    notificationActions.showNotification(n);\n  }\n  // console.log(`Message from Websocket: ${msg}`);\n}\n\nlet client = null;\n\nconst connect = () => {\n  client = new WS4Redis({\n    uri: 'ws://conta-comigo-ap.herokuapp.com/ws/frontend?subscribe-user',\n    connecting: onConnecting,\n    connected: onConnected,\n    receive_message: receiveMessage,\n    disconnected: onDisconnected,\n    heartbeat_msg: HEARTBEAT,\n  });\n};\n\nconst disconnect = () => {\n  client.close();\n};\n\nexport default {\n  startListening() {\n    connect();\n  },\n  stopListening() {\n    disconnect();\n  },\n};\n"]}]}