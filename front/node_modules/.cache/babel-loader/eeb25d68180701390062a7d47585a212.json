{"remainingRequest":"/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js!/home/manoel/Documents/conta-comigo-app-front/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/manoel/Documents/conta-comigo-app-front/src/components/CropDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/manoel/Documents/conta-comigo-app-front/src/components/CropDialog.vue","mtime":1587691736768},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/manoel/Documents/conta-comigo-app-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IENyb3BwZXIgZnJvbSAnY3JvcHBlcmpzJzsKaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC9kZWJvdW5jZSc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wdXRlZDogbWFwU3RhdGUoWydyZWdpc3RlciddKSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgY3JvcHBlcjogbnVsbCwKICAgICAgb2JqZWN0VXJsOiBudWxsLAogICAgICBwcmV2aWV3Q3JvcHBlZDogbnVsbCwKICAgICAgc2VsZWN0ZWRGaWxlOiBudWxsLAogICAgICBkZWJvdW5jZWRVcGRhdGVQcmV2aWV3OiBkZWJvdW5jZSh0aGlzLnVwZGF0ZVByZXZpZXcsIDI1NykKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZXR1cENyb3BwZXI6IGZ1bmN0aW9uIHNldHVwQ3JvcHBlcihzZWxlY3RlZEZpbGUpIHsKICAgICAgaWYgKHRoaXMuY3JvcHBlcikgewogICAgICAgIHRoaXMuY3JvcHBlci5kZXN0cm95KCk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9iamVjdFVybCkgewogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMub2JqZWN0VXJsKTsKICAgICAgfQoKICAgICAgaWYgKCFzZWxlY3RlZEZpbGUpIHsKICAgICAgICB0aGlzLmNyb3BwZXIgPSBudWxsOwogICAgICAgIHRoaXMub2JqZWN0VXJsID0gbnVsbDsKICAgICAgICB0aGlzLnByZXZpZXdDcm9wcGVkID0gbnVsbDsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMub2JqZWN0VXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoc2VsZWN0ZWRGaWxlKTsKICAgICAgdGhpcy4kbmV4dFRpY2sodGhpcy5zZXR1cENyb3BwZXJJbnN0YW5jZSk7CiAgICB9LAogICAgc2V0dXBDcm9wcGVySW5zdGFuY2U6IGZ1bmN0aW9uIHNldHVwQ3JvcHBlckluc3RhbmNlKCkgewogICAgICB0aGlzLmNyb3BwZXIgPSBuZXcgQ3JvcHBlcih0aGlzLiRyZWZzLnNvdXJjZSwgewogICAgICAgIGFzcGVjdFJhdGlvOiAxLAogICAgICAgIGNyb3A6IHRoaXMuZGVib3VuY2VkVXBkYXRlUHJldmlldwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVQcmV2aWV3OiBmdW5jdGlvbiB1cGRhdGVQcmV2aWV3KCkgewogICAgICB2YXIgY2FudmFzID0gdGhpcy5jcm9wcGVyLmdldENyb3BwZWRDYW52YXMoKTsKICAgICAgdGhpcy5wcmV2aWV3Q3JvcHBlZCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpOwogICAgfSwKICAgIHJlc2V0Q3JvcHBlcjogZnVuY3Rpb24gcmVzZXRDcm9wcGVyKCkgewogICAgICB0aGlzLmNyb3BwZXIucmVzZXQoKTsKICAgIH0sCiAgICByb3RhdGVMZWZ0OiBmdW5jdGlvbiByb3RhdGVMZWZ0KCkgewogICAgICB0aGlzLmNyb3BwZXIucm90YXRlKC05MCk7CiAgICB9LAogICAgcm90YXRlUmlnaHQ6IGZ1bmN0aW9uIHJvdGF0ZVJpZ2h0KCkgewogICAgICB0aGlzLmNyb3BwZXIucm90YXRlKDkwKTsKICAgIH0sCiAgICBzYXZlQ3JvcDogZnVuY3Rpb24gc2F2ZUNyb3AoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2F2YXRhcicsIHRoaXMucHJldmlld0Nyb3BwZWQpOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncmVnaXN0ZXIvc2V0QXZhdGFyJywgdGhpcy5wcmV2aWV3Q3JvcHBlZCk7CiAgICAgIHRoaXMuZGlhbG9nID0gZmFsc2U7CiAgICB9LAogICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgICAgdGhpcy5kaWFsb2cgPSB0cnVlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["CropDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA,OAAA,OAAA,MAAA,WAAA;AACA,OAAA,QAAA,MAAA,iBAAA;AACA,SAAA,QAAA,QAAA,MAAA;AAEA,eAAA;AACA,EAAA,QAAA,EAAA,QAAA,CAAA,CAAA,UAAA,CAAA,CADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA,IAFA;AAGA,MAAA,SAAA,EAAA,IAHA;AAIA,MAAA,cAAA,EAAA,IAJA;AAKA,MAAA,YAAA,EAAA,IALA;AAMA,MAAA,sBAAA,EAAA,QAAA,CAAA,KAAA,aAAA,EAAA,GAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,YADA,EACA;AACA,UAAA,KAAA,OAAA,EAAA;AACA,aAAA,OAAA,CAAA,OAAA;AACA;;AAEA,UAAA,KAAA,SAAA,EAAA;AACA,QAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,KAAA,SAAA;AACA;;AAEA,UAAA,CAAA,YAAA,EAAA;AACA,aAAA,OAAA,GAAA,IAAA;AACA,aAAA,SAAA,GAAA,IAAA;AACA,aAAA,cAAA,GAAA,IAAA;AACA;AACA;;AAEA,WAAA,SAAA,GAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,YAAA,CAAA;AACA,WAAA,SAAA,CAAA,KAAA,oBAAA;AACA,KAnBA;AAoBA,IAAA,oBApBA,kCAoBA;AACA,WAAA,OAAA,GAAA,IAAA,OAAA,CAAA,KAAA,KAAA,CAAA,MAAA,EAAA;AACA,QAAA,WAAA,EAAA,CADA;AAEA,QAAA,IAAA,EAAA,KAAA;AAFA,OAAA,CAAA;AAIA,KAzBA;AA0BA,IAAA,aA1BA,2BA0BA;AACA,UAAA,MAAA,GAAA,KAAA,OAAA,CAAA,gBAAA,EAAA;AACA,WAAA,cAAA,GAAA,MAAA,CAAA,SAAA,CAAA,WAAA,CAAA;AACA,KA7BA;AA8BA,IAAA,YA9BA,0BA8BA;AACA,WAAA,OAAA,CAAA,KAAA;AACA,KAhCA;AAiCA,IAAA,UAjCA,wBAiCA;AACA,WAAA,OAAA,CAAA,MAAA,CAAA,CAAA,EAAA;AACA,KAnCA;AAoCA,IAAA,WApCA,yBAoCA;AACA,WAAA,OAAA,CAAA,MAAA,CAAA,EAAA;AACA,KAtCA;AAuCA,IAAA,QAvCA,sBAuCA;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,KAAA,cAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,oBAAA,EAAA,KAAA,cAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KA3CA;AA4CA,IAAA,IA5CA,kBA4CA;AACA,WAAA,MAAA,GAAA,IAAA;AACA;AA9CA;AAZA,CAAA","sourcesContent":["<template>\n  <div>\n    <v-dialog v-model=\"dialog\" max-width=\"520\">\n      <v-card max-width=\"520\" raised>\n        <v-card-title class=\"headline primary--text\">\n          <span>Adicione uma foto para o seu perfil</span>\n          <v-spacer></v-spacer>\n          <v-btn\n            icon\n            @click=\"dialog=false\"\n          ><v-icon>mdi-close</v-icon></v-btn>\n        </v-card-title>\n        <v-card-text>\n          <v-file-input\n            :prepend-icon=\"null\"\n            v-model=\"selectedFile\"\n            accept=\"image/png, image/jpeg\"\n            label=\"Foto\"\n            placeholder=\"Selecione a imagem\"\n            outlined\n            :show-size=\"1024\"\n            class=\"my-4\"\n            @change=\"setupCropper\"\n          ></v-file-input>\n          <v-row v-if=\"objectUrl\">\n            <v-col cols=\"12\" sm=\"6\" class=\"text-center\">\n              <div class=\"overline\">Original</div>\n              <div class=\"image-container elevation-4\">\n                <img class=\"image-preview\" ref=\"source\" :src=\"objectUrl\">\n              </div>\n              <div class=\"d-flex justify-center\">\n                <v-btn icon small @click=\"resetCropper\">\n                  <v-icon small>mdi-aspect-ratio</v-icon>\n                </v-btn>\n                <div class=\"mx-2\">\n                  <v-btn icon small @click=\"rotateLeft\">\n                    <v-icon small>mdi-rotate-left</v-icon>\n                  </v-btn>\n                  <v-btn icon small @click=\"rotateRight\">\n                    <v-icon small>mdi-rotate-right</v-icon>\n                  </v-btn>\n                </div>\n              </div>\n            </v-col>\n            <v-col cols=\"12\" sm=\"6\" class=\"text-center\">\n              <div class=\"overline\">Preview</div>\n              <div class=\"image-container elevation-4\">\n                <img class=\"image-preview\" :src=\"previewCropped\">\n              </div>\n            </v-col>\n          </v-row>\n        </v-card-text>\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn\n            rounded\n            large\n            color=\"primary\"\n            :disabled=\"!objectUrl\"\n            @click=\"saveCrop\"\n          >\n            <span>Salvar</span>\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n<script>\nimport Cropper from 'cropperjs';\nimport debounce from 'lodash/debounce';\nimport { mapState } from 'vuex';\n\nexport default {\n  computed: mapState(['register']),\n  data() {\n    return {\n      dialog: false,\n      cropper: null,\n      objectUrl: null,\n      previewCropped: null,\n      selectedFile: null,\n      debouncedUpdatePreview: debounce(this.updatePreview, 257),\n    };\n  },\n  methods: {\n    setupCropper(selectedFile) {\n      if (this.cropper) {\n        this.cropper.destroy();\n      }\n\n      if (this.objectUrl) {\n        window.URL.revokeObjectURL(this.objectUrl);\n      }\n\n      if (!selectedFile) {\n        this.cropper = null;\n        this.objectUrl = null;\n        this.previewCropped = null;\n        return;\n      }\n\n      this.objectUrl = window.URL.createObjectURL(selectedFile);\n      this.$nextTick(this.setupCropperInstance);\n    },\n    setupCropperInstance() {\n      this.cropper = new Cropper(this.$refs.source, {\n        aspectRatio: 1,\n        crop: this.debouncedUpdatePreview,\n      });\n    },\n    updatePreview() {\n      const canvas = this.cropper.getCroppedCanvas();\n      this.previewCropped = canvas.toDataURL('image/png');\n    },\n    resetCropper() {\n      this.cropper.reset();\n    },\n    rotateLeft() {\n      this.cropper.rotate(-90);\n    },\n    rotateRight() {\n      this.cropper.rotate(90);\n    },\n    saveCrop() {\n      this.$emit('avatar', this.previewCropped);\n      this.$store.dispatch('register/setAvatar', this.previewCropped);\n      this.dialog = false;\n    },\n    open() {\n      this.dialog = true;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.image-container {\n  display: inline-block;\n}\n\n.image-preview {\n  display: block;\n  max-height: 229px;\n  max-width: 100%;\n}\n</style>\n<style lang=\"scss\">\n  @import './../../node_modules/cropperjs/dist/cropper.css';\n</style>\n"],"sourceRoot":"src/components"}]}